<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Hamlet</title>
		<link rel="stylesheet" href="./styles.css" />
		<link rel="icon" href="./assets/favicon.svg" />
	</head>

	<body>
		<div class="todo-container">
			<form class="todo-creator" action="">
				<input type="text" id="new-todo-input" />
				<button id="add-todo">Add</button>
			</form>
		</div>

		<div id="modalContainer" class="hidden">
			<div id="modalContent">
				<input type="text" id="edit-todo-input" />
				<button id="save-todo">Save</button>
				<button id="cancel-edit">Cancel</button>
			</div>
		</div>

		<script>
			const addTodoBtn = document.getElementById('add-todo');
			const todoContainer = document.querySelector('.todo-container');
			const newTodoInput = document.getElementById('new-todo-input');
			const modalContainer = document.getElementById('modalContainer');
			const modalContent = document.getElementById('modalContent');
			const editTodoInput = document.getElementById('edit-todo-input');
			let currentEditTodoItem;

			addTodoBtn.addEventListener('click', (e) => {
				e.preventDefault();

				const todoText = newTodoInput.value.trim();
				if (todoText !== '') {
					const todoItem = document.createElement('div');
					todoItem.classList.add('todo-item');
					todoItem.innerHTML = `
          <p class="todo-text">${todoText}</p>
          <input type="checkbox" class="checkbox" />
          <button class="edit-todo">Edit</button>
          <button class="delete-todo">Delete</button>
        `;
					todoContainer.appendChild(todoItem);
					newTodoInput.value = '';

					const deleteBtn = todoItem.querySelector('.delete-todo');
					deleteBtn.addEventListener('click', () => {
						todoItem.remove();
					});

					const editBtn = todoItem.querySelector('.edit-todo');
					editBtn.addEventListener('click', () => {
						const todoText = todoItem.querySelector('.todo-text').textContent;
						editTodoInput.value = todoText;
						modalContainer.classList.remove('hidden');
						currentEditTodoItem = todoItem;
					});
				}
			});

			const cancelEditBtn = document.getElementById('cancel-edit');
			cancelEditBtn.addEventListener('click', () => {
				modalContainer.classList.add('hidden');
			});

			const saveTodoBtn = document.getElementById('save-todo');
			saveTodoBtn.addEventListener('click', () => {
				const editedTodoText = editTodoInput.value.trim();
				if (editedTodoText !== '') {
					currentEditTodoItem.querySelector('.todo-text').textContent =
						editedTodoText;
					modalContainer.classList.add('hidden');
				}
			});
		</script>
	</body>
</html>
